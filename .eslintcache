[{"C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Projects\\Datafile Morniting\\Home.jsx":"1","C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Projects\\Datafile Morniting\\TableContainer.jsx":"2","C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Projects\\Datafile Morniting\\filters.jsx":"3","C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\index.js":"4","C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\components\\Footer.js":"5","C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Projects\\Datafile Morniting\\PDF.jsx":"6","C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\components\\CircleLoader.jsx":"7","C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Login\\login.jsx":"8","C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Signup\\signup.jsx":"9","C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Projects\\Datafile Morniting\\ShowTable.js":"10"},{"size":1811,"mtime":1655450331325,"results":"11","hashOfConfig":"12"},{"size":4478,"mtime":1655450482098,"results":"13","hashOfConfig":"12"},{"size":2787,"mtime":1655462642349,"results":"14","hashOfConfig":"12"},{"size":611,"mtime":1655369603245,"results":"15","hashOfConfig":"12"},{"size":696,"mtime":1655271966021,"results":"16","hashOfConfig":"12"},{"size":3411,"mtime":1655449578183,"results":"17","hashOfConfig":"12"},{"size":778,"mtime":1655265204826,"results":"18","hashOfConfig":"12"},{"size":7518,"mtime":1655351108167,"results":"19","hashOfConfig":"12"},{"size":10696,"mtime":1655436784398,"results":"20","hashOfConfig":"12"},{"size":2012,"mtime":1655460049033,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"1hbko9z",{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"39","messages":"40","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"26"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Projects\\Datafile Morniting\\Home.jsx",["44","45"],"C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Projects\\Datafile Morniting\\TableContainer.jsx",[],["46","47"],"C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Projects\\Datafile Morniting\\filters.jsx",["48","49"],"C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\index.js",[],"C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\components\\Footer.js",[],"C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Projects\\Datafile Morniting\\PDF.jsx",["50","51","52","53"],"C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\components\\CircleLoader.jsx",[],"C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Login\\login.jsx",["54","55","56","57","58","59","60","61"],"C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Signup\\signup.jsx",["62","63","64","65"],"import React, { useEffect, useRef, useState } from 'react'\r\nimport {  createUserWithEmailAndPassword, sendEmailVerification, updateProfile, onAuthStateChanged, deleteUser, updatePassword, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { authSec, db } from '../../firebaseSec';\r\nimport {Modal, Form, Button, InputGroup, FormControl}  from 'react-bootstrap';\r\nimport { auth } from '../../firebase'\r\nimport { useNavigate } from 'react-router'\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  deleteDoc,\r\n  updateDoc,\r\n  doc,\r\n} from \"firebase/firestore\";\r\n\r\nimport Loading from '../../components/Loading';\r\n\r\nimport './signup.css'\r\n\r\nexport default function Signup() {\r\n\r\n  const [userInfo, setUserInfo] = useState({ userName: '', email: '', password: '' });\r\n  const [alert, setAlert] = useState({visible:false, severity:'', message:''});\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  // Use for change profile and password\r\n  const [newPassword, setNewPassword] = useState(\"\")\r\n  const [changeUser, setChangeUser] = useState()\r\n  const [newName, setNewName] = useState(\"\")\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isActive, setActive] = useState(\"false\");\r\n  const router = useNavigate();\r\n  const timerRef = useRef(null);\r\n\r\n  const [users, setUsers] = useState([]);\r\n  const usersCollectionRef = collection(db, \"users\");\r\n\r\n  // To delete user in firebase\r\n  const deleteUserOnFstored = async (user) => {\r\n    setIsLoading(true);\r\n\r\n    // delete user in firestore\r\n    const userDoc = doc(db, \"users\", user.id);\r\n    await deleteDoc(userDoc);\r\n\r\n    // delete user in firebase auth\r\n    await signInWithEmailAndPassword(authSec, user.email, user.password)\r\n      .then(() => {\r\n        const userToDel = authSec.currentUser\r\n        deleteUser(userToDel)\r\n        authSec.signOut()\r\n      })\r\n\r\n    setIsLoading(false);\r\n    updateUI()\r\n    // window.location.reload(false);\r\n    };\r\n\r\n  // get all users in firestore and set to variable name \"users\"\r\n  useEffect(() => {\r\n    const getUsers = async () => {\r\n      const data = await getDocs(usersCollectionRef);\r\n      setUsers(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n\r\n    getUsers();\r\n    \r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    return clearTimeout(timerRef.current)\r\n  },[])\r\n  \r\n  // Check that the user are logged in\r\n  useEffect(() => {\r\n      const authentication = onAuthStateChanged(auth,(user) => {\r\n          if (user) {\r\n              router('/managementUser')\r\n          } else {\r\n              router('/')\r\n         }\r\n      }) \r\n      \r\n      return authentication\r\n  },[])\r\n\r\n  // Change Name or Password in firebase\r\n  const handleChange = async (user) => {\r\n    setIsOpen(!isOpen)\r\n    setIsLoading(true)\r\n    setChangeUser(user)\r\n\r\n    // Change in firestore\r\n    const userDoc = doc(db, \"users\", user.id);\r\n\r\n    if (newName !== \"\") {\r\n      await updateDoc(userDoc, {\r\n        \"userName\": newName\r\n      });\r\n    }\r\n\r\n    if (newPassword !== \"\") {\r\n      await updateDoc(userDoc, {\r\n        \"password\": newPassword\r\n      });\r\n    }\r\n\r\n    // Change in firebase auth\r\n    await signInWithEmailAndPassword(authSec, user.email, user.password)\r\n    .then(() => {\r\n      const userToChange = authSec.currentUser\r\n      \r\n      if(newName !== \"\") {\r\n        updateProfile(userToChange, {\r\n          displayName: newName\r\n        })\r\n      }\r\n\r\n      if(newPassword !== \"\") {\r\n        updatePassword(userToChange, newPassword)\r\n      }\r\n      setIsLoading(false);\r\n      authSec.signOut()\r\n    })\r\n    \r\n    updateUI()\r\n    // window.location.reload(false);\r\n  }\r\n\r\n  const ControlBlocked = async (user) => {\r\n    setIsLoading(true)\r\n    console.log(\"Controlblocked function\")\r\n    const userDoc = doc(db, \"users\", user.id);\r\n    await updateDoc(userDoc, {\r\n      \"isBlocked\": !user.isBlocked\r\n      \r\n    });\r\n    setIsLoading(false)\r\n    updateUI()\r\n    // window.location.reload(false);\r\n  }\r\n\r\n  // To create new user in firebase\r\n  const handleSubmit = async (event) => {\r\n    setIsLoading(true);\r\n\r\n    event.preventDefault();\r\n    \r\n    // To create user in firestore\r\n    const usersCollectionRef = collection(db, \"users\")\r\n    await addDoc(usersCollectionRef, { userName: userInfo.userName, email: userInfo.email, password: userInfo.password , isBlocked: false});\r\n    // Create user in firebase auth\r\n    createUserWithEmailAndPassword(authSec, userInfo.email, userInfo.password)\r\n      .then((userInformation) => {\r\n        updateProfile(authSec.currentUser, {\r\n          displayName:userInfo.userName\r\n        })\r\n        // createUser(); \r\n        \r\n        // router('/managementUser')\r\n      })\r\n      .catch(error => {\r\n        setAlert({ visible:true,severity:'error',message:error.message})\r\n        console.log(error.code);\r\n        timerRef.current= setTimeout(() => {\r\n          setAlert({ visible:false,severity:'',message:''})\r\n        },2000)\r\n    })\r\n    setIsLoading(false);\r\n    updateUI();\r\n    window.location.reload(false);\r\n  };\r\n\r\n  // To open/close popup and set user that send form edit btn\r\n  function changeSet(user) {\r\n    setChangeUser(user)\r\n    setIsOpen(!isOpen)\r\n    setNewName(user.userName)\r\n    setNewPassword(user.password)\r\n  }\r\n\r\n  function displayOption() {\r\n    setActive(!isActive);\r\n    var x = document.getElementById(\"myInput\");\r\n\r\n    if (x.type === \"password\") {\r\n      x.type = \"text\";\r\n    } else {\r\n      x.type = \"password\";\r\n    }\r\n  }\r\n\r\n  function updateUI() {\r\n    setIsLoading(true)\r\n    setInterval(() => {\r\n      console.log(\"Updating UI\")\r\n      const getUsers = async () => {\r\n        const data = await getDocs(usersCollectionRef);\r\n        setUsers(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n        \r\n      };\r\n    \r\n    console.log(\"getUsers: \",users)\r\n    getUsers();\r\n    setIsLoading(false)\r\n    }, 1000)\r\n  }\r\n\r\n  // Popup input to chnage password or name\r\n  function popup() {\r\n    \r\n    return (isOpen) ? (\r\n      <div>\r\n        <Modal show={true} onHide={(e)=>{setIsOpen(!isOpen)}}>\r\n          <Modal.Header>\r\n            <Modal.Title>Modal heading <i onClick={(e) => setIsOpen(!isOpen)} style={{cursor:\"pointer\", marginLeft:\"270px\"}} className='fa fa-times'/></Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <Form>\r\n              <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput1\">\r\n                <Form.Label>Name</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  placeholder={changeUser.userName}\r\n                  value={newName}\r\n                  onChange={(e) => setNewName(e.target.value)}\r\n                  autoFocus\r\n                />\r\n              </Form.Group>\r\n              <Form.Group\r\n                className=\"mb-3\"\r\n                controlId=\"exampleForm.ControlTextarea1\"\r\n              >\r\n                <Form.Label>Password</Form.Label>\r\n                <InputGroup className=\"mb-3\">\r\n                  \r\n                  <FormControl\r\n                    aria-label=\"Example text with button addon\"\r\n                    aria-describedby=\"basic-addon1\"\r\n                    id='myInput'\r\n                    type=\"password\"\r\n                    placeholder=\"password\"\r\n                    value={newPassword}\r\n                    onChange={(e) => setNewPassword(e.target.value)}\r\n                  />\r\n                  <Button variant=\"outline-secondary\" id=\"button-addon1\">\r\n                    <i class={isActive ? \"fa fa-eye\" : \"fa fa-eye-slash\"} id=\"togglePassword\" onClick={(e) => displayOption(this)}/>\r\n                  </Button>\r\n                </InputGroup>\r\n              </Form.Group>\r\n            </Form>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={(e) => setIsOpen(!isOpen)}>\r\n              Close\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={(e) =>{handleChange(changeUser)}}>\r\n              Save Changes\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </div>\r\n    ) : \"\";\r\n  }\r\n\r\n   return (\r\n    <div className=\"content-wrapper\">\r\n      <Loading isLoading={isLoading} />\r\n      <h3>Management {'>'} User</h3>\r\n      \r\n      <div className='input-wrapper'>\r\n        <h4>Create New User</h4>\r\n\r\n        <div className='input-container'>\r\n          <input className='input-register'\r\n            placeholder=\"Name...\"\r\n            onChange={(event) => {\r\n              setUserInfo({ ...userInfo, userName: event.target.value })\r\n            }}\r\n          />\r\n          <input className='input-register'\r\n            type=\"Email\"\r\n            placeholder=\"Email...\"\r\n            onChange={(event) => {\r\n              setUserInfo({ ...userInfo, email: event.target.value })\r\n            }}\r\n          />\r\n          <input className='input-register'\r\n            type=\"Password\"\r\n            placeholder=\"Password...\"\r\n            onChange={(event) => {\r\n              setUserInfo({ ...userInfo, password: event.target.value })\r\n            }}\r\n          />\r\n          \r\n            <button className=\"btn\" onClick={handleSubmit}> Create User</button>\r\n          \r\n        </div>\r\n      </div>\r\n      {popup()}\r\n      <div className='table-container'>\r\n        <table class=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Number</th>\r\n              <th>First Name</th>\r\n              <th>isBlocked</th>\r\n              <th>Email</th>\r\n              <th>function</th>\r\n            </tr>\r\n          </thead>\r\n          {users.map((user, index) => {return (\r\n          <tbody>\r\n            <tr>\r\n              <td>{index+1}</td>\r\n              <td>{user.userName}</td>\r\n              <td>{user.isBlocked.toString()}</td>\r\n              <td>{user.email}</td>\r\n              <td className='btn-table'> \r\n                <button\r\n                  className='btn-function btn'\r\n                  onClick={() => {\r\n                    deleteUserOnFstored(user);\r\n                  }}\r\n                  >\r\n                  {\" \"}\r\n                  Delete User\r\n                </button>\r\n                <button\r\n                  className='btn btn-function'\r\n                  onClick={(e) => changeSet(user)}\r\n                >\r\n                  {\" \"}\r\n                  Edit\r\n                </button>\r\n                <Button variant={user.isBlocked ? \"outline-danger\" : \"outline-secondary\"} id=\"button-addon1\" >\r\n                    <i class={user.isBlocked ? \"fa fa-lock\" : \"fa fa-unlock\"} id=\"togglePassword\" onClick={(e)=>ControlBlocked(user)}/>\r\n                </Button>\r\n              </td>\r\n            </tr>\r\n          </tbody>)})}\r\n        </table>\r\n      </div>         \r\n    </div>\r\n  );\r\n}","C:\\Users\\aooko\\Documents\\GitHub\\rabbit-dash\\src\\Container\\Projects\\Datafile Morniting\\ShowTable.js",["66","67"],{"ruleId":"68","severity":1,"message":"69","line":2,"column":10,"nodeType":"70","messageId":"71","endLine":2,"endColumn":24},{"ruleId":"68","severity":1,"message":"72","line":7,"column":9,"nodeType":"70","messageId":"71","endLine":7,"endColumn":14},{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","replacedBy":"76"},{"ruleId":"68","severity":1,"message":"77","line":7,"column":8,"nodeType":"70","messageId":"71","endLine":7,"endColumn":16},{"ruleId":"68","severity":1,"message":"78","line":68,"column":10,"nodeType":"70","messageId":"71","endLine":68,"endColumn":15},{"ruleId":"68","severity":1,"message":"69","line":2,"column":10,"nodeType":"70","messageId":"71","endLine":2,"endColumn":24},{"ruleId":"68","severity":1,"message":"79","line":7,"column":8,"nodeType":"70","messageId":"71","endLine":7,"endColumn":15},{"ruleId":"68","severity":1,"message":"80","line":12,"column":12,"nodeType":"70","messageId":"71","endLine":12,"endColumn":21},{"ruleId":"68","severity":1,"message":"72","line":14,"column":11,"nodeType":"70","messageId":"71","endLine":14,"endColumn":16},{"ruleId":"68","severity":1,"message":"81","line":11,"column":55,"nodeType":"70","messageId":"71","endLine":11,"endColumn":62},{"ruleId":"68","severity":1,"message":"82","line":11,"column":64,"nodeType":"70","messageId":"71","endLine":11,"endColumn":74},{"ruleId":"68","severity":1,"message":"83","line":14,"column":10,"nodeType":"70","messageId":"71","endLine":14,"endColumn":17},{"ruleId":"68","severity":1,"message":"84","line":18,"column":3,"nodeType":"70","messageId":"71","endLine":18,"endColumn":9},{"ruleId":"68","severity":1,"message":"85","line":19,"column":3,"nodeType":"70","messageId":"71","endLine":19,"endColumn":12},{"ruleId":"68","severity":1,"message":"86","line":66,"column":13,"nodeType":"70","messageId":"71","endLine":66,"endColumn":17},{"ruleId":"87","severity":1,"message":"88","line":68,"column":34,"nodeType":"89","messageId":"90","endLine":68,"endColumn":36},{"ruleId":"68","severity":1,"message":"91","line":151,"column":11,"nodeType":"70","messageId":"71","endLine":151,"endColumn":15},{"ruleId":"68","severity":1,"message":"92","line":2,"column":43,"nodeType":"70","messageId":"71","endLine":2,"endColumn":64},{"ruleId":"68","severity":1,"message":"93","line":23,"column":10,"nodeType":"70","messageId":"71","endLine":23,"endColumn":15},{"ruleId":"94","severity":1,"message":"95","line":69,"column":6,"nodeType":"96","endLine":69,"endColumn":8,"suggestions":"97"},{"ruleId":"94","severity":1,"message":"98","line":86,"column":5,"nodeType":"96","endLine":86,"endColumn":7,"suggestions":"99"},{"ruleId":"68","severity":1,"message":"100","line":1,"column":17,"nodeType":"70","messageId":"71","endLine":1,"endColumn":26},{"ruleId":"68","severity":1,"message":"101","line":1,"column":28,"nodeType":"70","messageId":"71","endLine":1,"endColumn":36},"no-unused-vars","'MDBDataTableV5' is defined but never used.","Identifier","unusedVar","'data1' is assigned a value but never used.","no-native-reassign",["102"],"no-negated-in-lhs",["103"],"'enLocale' is defined but never used.","'value' is assigned a value but never used.","'Loading' is defined but never used.","'isLoading' is assigned a value but never used.","'signOut' is defined but never used.","'deleteUser' is defined but never used.","'authSec' is defined but never used.","'addDoc' is defined but never used.","'deleteDoc' is defined but never used.","'data' is assigned a value but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","'user' is assigned a value but never used.","'sendEmailVerification' is defined but never used.","'alert' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'usersCollectionRef'. Either include it or remove the dependency array.","ArrayExpression",["104"],"React Hook useEffect has a missing dependency: 'router'. Either include it or remove the dependency array.",["105"],"'useEffect' is defined but never used.","'useState' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"106","fix":"107"},{"desc":"108","fix":"109"},"Update the dependencies array to be: [usersCollectionRef]",{"range":"110","text":"111"},"Update the dependencies array to be: [router]",{"range":"112","text":"113"},[2224,2226],"[usersCollectionRef]",[2611,2613],"[router]"]